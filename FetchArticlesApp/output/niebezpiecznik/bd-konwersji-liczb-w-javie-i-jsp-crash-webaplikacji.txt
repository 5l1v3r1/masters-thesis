Okazuje się, że nie tylko PHP jest podatne na opisane przez nas niedawno ataki DoS wynikające z błędu konwersji liczby 2.2250738585072011e-308. Co więcej, Java czyni ten bug jeszcze ciekawszym! Java: 2.2250738585072011e-308 Zarówno Javowy runtime jak i kompilator (wersje 32- i 64-bit), wpadają w nieskończoną pętle przy próbach kowersji dziesiętnej wartości 2.2250738585072011e-308 na double-precision binary floating-point. Wartość powinna zostać przekonwertowana do 0x1p-1022 (DBL_MIN) ale Java zwiesza się przy 0x0.fffffffffffffp-1022 (largest subnormal double-precision floating-point number). Podobnie jak w przypadku PHP inne formy zapisu tej liczby również powodują problemy: 0.00022250738585072012e-304 00000000002.2250738585072012e-308 2.225073858507201200000e-308 2.2250738585072012e-00308 2.2250738585072012997800001e-308) Aby wypróbować błąd na własnej skórze możecie skompilować i uruchomić dwa poniższe programy. Pierwszy ubije środowisko uruchomieniowe, drugi kompilator: class runhang { public static void main(String[] args) { System.out.println("Test:"); double d = Double.parseDouble("2.2250738585072012e-308"); System.out.println("Value: " + d);}} class compilehang { public static void main(String[] args) { double d = 2.2250738585072012e-308; System.out.println("Value: " + d);}} Błąd został znaleziony przez Konstantina Preißera, a jego przyczyna została zawężona do “pętli naprawczej” w FloatingDecimal.java. Koto zauważył świetny komentarz w w/w pliku w okolicach correction loop — sprawdźcie linię 676 ;-) Uwaga na webaplikacje pisane w JSP Przewidujemy ciężkie dni dla właścicieli webaplikacji pisanych w Javie. Skutki błędu już są odczuwalne m.in. w Google Spreadsheets — wpisanie 2.2250738585072011e-308 do komórki i np. dodanie 1 spowoduje zawieszenie się aplikacji do momentu timeoutu backendu. Radzimy szybko sprawdzić wszystkie zmienne przekazywane do waszych javowej webaplikacji (m.in. GET/POST/Cookie), których wartości mogą ustawiać internauci. A gdybyście chcieli wiedzieć na co jeszcze zwrócić uwagę w kontekście bezpieczeństwa webaplikacji, to zapraszamy na kolejną edycją naszego szkolenia :-) ,vi.curry